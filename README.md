# Приложение для зонирования помещений

Это прототип приложения, которое загружает план помещения из JSON-файла, отображает его в 2D-редакторе, отправляет на backend для генерации зонирования и отображает результат на UI.

## Структура проекта

- `frontend/` - React приложение с TypeScript, Material UI и Canvas для отображения плана
  - `src/components/` - React компоненты
  - `src/services/` - Сервисы для взаимодействия с API
  - `src/types.ts` - Типы данных
  - `src/constants.ts` - Константы проекта
- `backend/` - NestJS приложение с API для генерации зонирования
  - `src/zoning/` - Модуль для работы с зонированием
  - `src/zoning/dto/` - Data Transfer Objects
  - `src/constants.ts` - Константы проекта

## Возможности

- Загрузка плана помещения из JSON файла
- Валидация загружаемых данных
- Отображение плана на интерактивном Canvas
- Отправка плана на backend для генерации зонирования
- Автоматическое назначение цветов для разных зон
- Скачивание примера JSON файла

## Требования

- Node.js (версия 16 или выше)
- npm (версия 7 или выше)

## Установка и запуск

### 1. Запуск Backend (NestJS)

1. Перейдите в директорию backend:
   ```
   cd floorplan-app/backend
   ```

2. Запустите сервер в режиме разработки:
   ```
   npm run start:dev
   ```
   
   Сервер будет запущен на http://localhost:3000

### 2. Запуск Frontend (React + TypeScript + Vite)

1. Откройте новый терминал и перейдите в директорию frontend:
   ```
   cd floorplan-app/frontend
   ```

2. Запустите приложение в режиме разработки:
   ```
   npm run dev
   ```
   
   Приложение будет доступно по адресу http://localhost:5173

### 3. Тестирование приложения

В корне проекта есть готовый пример JSON-файла входных данных:
```
floorplan-app/input_plan.json
```

Также вы можете создать свой JSON файл или скачать пример прямо из интерфейса приложения.

## Использование приложения

1. Откройте веб-приложение в браузере по адресу http://localhost:5173.
2. Нажмите кнопку "Загрузить план помещения (JSON)" и выберите JSON-файл с планом помещения.
3. План загрузится и отобразится на Canvas.
4. Нажмите кнопку "Сгенерировать зонирование" для отправки плана на backend.
5. После обработки (около 3 секунд) результат зонирования будет отображен на Canvas с цветовой маркировкой зон.

## Формат входных/выходных данных

### Входной JSON-файл с планом помещения

```json
{
  "rooms": [
    { "id": 1, "x": 20, "y": 40, "width": 100, "height": 80 },
    { "id": 2, "x": 150, "y": 40, "width": 120, "height": 80 }
  ]
}
```

### Ответ от backend с зонированием

```json
{
  "zones": [
    { "roomId": 1, "zone": "Рабочая зона" },
    { "roomId": 2, "zone": "Переговорная" }
  ]
}
```

## Ограничения

- Максимальное количество комнат для обработки: 100
- Поддерживаемые зоны по умолчанию: Рабочая зона, Переговорная, Зона отдыха, Кухня, Спальня
- Все комнаты должны иметь уникальные ID для корректного зонирования

## Разработка

### Frontend
- React 19
- TypeScript
- Material UI
- Konva.js для Canvas
- Vite для сборки

### Backend
- NestJS
- TypeScript
- Class-validator и class-transformer для валидации DTO
- Имитация ML-сервиса с задержкой 3 секунды 